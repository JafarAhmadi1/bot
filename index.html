<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>آپلود عکس با دریافت لینک</title>
  <style>
    body { font-family: sans-serif; direction: rtl; text-align: right; padding: 2em; }
    #output { margin-top: 1em; color: green; }
  </style>
</head>
<body>

  
  <h2>ارسال عکس دوم به PostImages از طریق Cloudflare Worker</h2>

  <form id="uploadForm">
    <input type="file" id="fileInput" accept="image/*" required>
    <br><br>
    <button type="submit">آپلود کن</button>
  </form>

  <div id="output"></div>

  <script>
    document.getElementById("uploadForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const fileInput = document.getElementById("fileInput");
      if (fileInput.files.length === 0) {
        alert("لطفاً یک تصویر انتخاب کنید.");
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("file", file);

      // ارسال فایل به Worker خودت. این آدرس باید آدرس واقعی Workerت باشه!
      const response = await fetch("https://eite2bale.jafar-ahmadi658.workers.dev/", {
        method: "POST",
        body: formData
      });

      const result = await response.json();
      const link = result?.url || result?.url_short || "لینک یافت نشد";

      document.getElementById("output").innerHTML = `✅ لینک تصویر: <a href="${link}" target="_blank">${link}</a>`;
    });
  </script>

</body>
</html>
