<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ú© Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ø§ÛŒØªØ§</title>
    
    <!-- Ù…Ø±Ø­Ù„Ù‡ 1: Ø§ØªØµØ§Ù„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„ÛŒ Ø§ÛŒØªØ§ -->
    <!-- Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ÛŒØ¯ Ø­ØªÙ…Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ù…Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¨Ø§Ø´Ø¯ -->
    <script src="https://developer.eitaa.com/eitaa-web-app.js"></script>

    <style>
        /* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø±Ù†Ú¯ÛŒ Ú©Ù‡ Ø§ÛŒØªØ§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯ */
        :root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --text-color: var(--tg-theme-text-color, #000000);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --button-color: var(--tg-theme-button-color, #3390ec);
            --button-text-color: var(--tg-theme-button-text-color, #ffffff);
            --secondary-bg-color: var(--tg-theme-secondary-bg-color, #f1f1f1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            text-align: center;
            transition: color 0.2s, background-color 0.2s;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        p {
            font-size: 16px;
            color: var(--hint-color);
        }

        #user-info {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            margin-top: 15px;
            border: none;
            border-radius: 8px;
            background-color: var(--button-color);
            color: var(--button-text-color);
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ‰ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ú© Ù…Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!</h1>
        <p>Ø§ÛŒÙ† ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ú© Ø§ÛŒØªØ§ Ø§Ø³Øª.</p>
        
        <div id="user-info">
            Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±...
        </div>

        <button class="button" id="change-header-btn">ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ù‡Ø¯Ø±</button>
        <button class="button" id="show-confirm-btn">Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… ØªØ§ÛŒÛŒØ¯</button>

    </div>

    <script>
        // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø¹Ø¯ Ø§Ø² Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ ØµÙØ­Ù‡ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¢Ø¨Ø¬Ú©Øª Ø§ØµÙ„ÛŒ API Ø§ÛŒØªØ§
                const EitaaApp = window.Eitaa.WebApp;

                // Ù…Ø±Ø­Ù„Ù‡ 2: Ø¨Ù‡ Ø§ÛŒØªØ§ Ø§Ø¹Ù„Ø§Ù… Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú©Ù‡ Ø¨Ø±Ù†Ø§Ù…Ú© Ø¢Ù…Ø§Ø¯Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø§Ø³Øª
                EitaaApp.ready();

                // Ù…Ø±Ø­Ù„Ù‡ 3: Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± (Ø§Ø² Ù†Ø³Ø®Ù‡ Ù†Ø§Ø§Ù…Ù† Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª)
                if (EitaaApp.initDataUnsafe && EitaaApp.initDataUnsafe.user) {
                    const user = EitaaApp.initDataUnsafe.user;
                    const userInfoDiv = document.getElementById('user-info');
                    // Ø§Ú¯Ø± Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªØŒ Ø¢Ù† Ø±Ø§ Ù‡Ù… Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡
                    const lastName = user.last_name ? ' ' + user.last_name : '';
                    userInfoDiv.innerText = `Ø³Ù„Ø§Ù…ØŒ ${user.first_name}${lastName}!`;
                } else {
                    document.getElementById('user-info').innerText = 'Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª.';
                }
                
                // Ù…Ø±Ø­Ù„Ù‡ 4: Ú©Ø§Ø± Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ (MainButton)
                // ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡
                EitaaApp.MainButton.setText('Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø§ÛŒØªØ§');
                EitaaApp.MainButton.show();
                
                // ØªØ¹Ø±ÛŒÙ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ
                EitaaApp.MainButton.onClick(() => {
                    EitaaApp.showAlert(`Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ´Ø±Ø¯Ù‡ Ø´Ø¯!`);
                    // Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨ÙØ±Ø³ØªÛŒØ¯ ÛŒØ§ Ø¨Ø±Ù†Ø§Ù…Ú© Ø±Ø§ Ø¨Ø¨Ù†Ø¯ÛŒØ¯
                    // EitaaApp.close();
                });

                // Ù…Ø±Ø­Ù„Ù‡ 5: Ú©Ø§Ø± Ø¨Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ ØµÙØ­Ù‡ ÙˆØ¨
                const changeHeaderBtn = document.getElementById('change-header-btn');
                changeHeaderBtn.addEventListener('click', () => {
                    // ÛŒÚ© Ø±Ù†Ú¯ ØªØµØ§Ø¯ÙÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒÙ…
                    const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
                    EitaaApp.setHeaderColor(randomColor);
                });
                
                const showConfirmBtn = document.getElementById('show-confirm-btn');
                showConfirmBtn.addEventListener('click', () => {
                    // Ù†Ù…Ø§ÛŒØ´ ÛŒÚ© Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ØªØ§ÛŒÛŒØ¯
                    EitaaApp.showConfirm("Ø¢ÛŒØ§ Ø§Ø² Ø§Ù†Ø¬Ø§Ù… Ø§ÛŒÙ† Ú©Ø§Ø± Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ", (confirmed) => {
                        if (confirmed) {
                            EitaaApp.showAlert("Ø´Ù…Ø§ Ø¯Ú©Ù…Ù‡ ØªØ§ÛŒÛŒØ¯ Ø±Ø§ Ø²Ø¯ÛŒØ¯.");
                        } else {
                            EitaaApp.showAlert("Ø´Ù…Ø§ Ø¹Ù…Ù„ÛŒØ§Øª Ø±Ø§ Ù„ØºÙˆ Ú©Ø±Ø¯ÛŒØ¯.");
                        }
                    });
                });

            } catch (error) {
                // Ø§Ú¯Ø± Ø®Ø§Ø±Ø¬ Ø§Ø² Ø§ÛŒØªØ§ Ø¨Ø§Ø² Ø´ÙˆØ¯ØŒ Ø§ÛŒÙ† Ø®Ø·Ø§ Ø±Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
                document.body.innerHTML = `<h1>Ø®Ø·Ø§</h1><p>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø¯Ø§Ø®Ù„ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§ÛŒØªØ§ Ø¨Ø§Ø² Ø´ÙˆØ¯.</p><p style="font-size:12px; color: #ff0000;">${error}</p>`;
            }
        });
    </script>
</body>
</html>
